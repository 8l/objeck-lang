bundle Default {
	enum Signal {
		Destroy
	}

	class GtkWindow {
		widget_ptr : Int;

		New() {
		}
		
		method : public : SignalConnect(signal : Signal, callback : (GtkWidget, GdkEvent) ~ Bool) ~ Nil {
			dym_lib := NativeLibrary->New("Foo");
			args := Base->New[2];
			args[0] := Structure.IntHolder->New(0);
			args[1] := Structure.IntHolder->New(10);
			dym_lib->Call("foo", args);
		}

		method : public : Main() ~ Nil {
		}
	}

	class GtkWidget {
	}

	class GdkEvent {
	}

	class Gtk2 {
		function : DeleteEvent(widget : GtkWidget, event : GdkEvent) ~ Bool {
			return true;
		}

		function : Main(args : String[]) ~ Nil {
			window := GtkWindow->New();	
			f := DeleteEvent(GtkWidget, GdkEvent) ~ Bool;
			window->SignalConnect(Signal->Destroy, f);
			window->Main();
		}
	}
}
