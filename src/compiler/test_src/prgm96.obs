use IO;

bundle Default {
	class BasicBlocks {
		function : Main(args : System.String[]) ~ Nil {
			msg := "Hello";
			serial := Serializer->New();
#~
			serial->Add(101);
			serial->Add(3.5);
			array := Byte->New[4];
			array[0] := 7;
			array[1] := 27;
			array[2] := 6;
			array[3] := 13;
			serial->Add(array);

			array2:= Int->New[3];
			array2[0] := 2;
			array2[1] := 3;
			array2[2] := 4;
			serial->Add(array2);

			array3:= Float->New[2];
			array3[0] := 3.5;
			array3[1] := 4.5;
			serial->Add(array3);
~#
			serial->Add(msg->As(Base));

			bytes := serial->Serialize();

			deserial := Deserializer->New(bytes);
#~
			v1 := deserial->ReadInt();
			v1->PrintLine();
			v2 := deserial->ReadFloat();
			v2->PrintLine();

			a := deserial->ReadByteArray();
			b := a[1]->As(Int);
			b->PrintLine();

			c := deserial->ReadIntArray();
			d := c[1]->As(Int);
			d->PrintLine();

			e := deserial->ReadFloatArray();
			f := e[1]->As(Float);
			f->PrintLine();
~#
			g := deserial->ReadObject()->As(String);
			g->PrintLine();
		}
	}
}
