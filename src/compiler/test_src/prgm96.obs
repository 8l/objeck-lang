use IO;

bundle Default {
	class BasicBlocks {
		function : Main(args : System.String[]) ~ Nil {
			msg := "Hello";
			serial := Serializer->New();
#			serial->Add(101);
#			serial->Add(3.5);
			array := Byte->New[4];
			array[0] := 7;
			array[1] := 27;
			array[2] := 6;
			array[3] := 13;

			array2:= Int->New[3];
			array2[0] := 2;
			array2[1] := 3;
			array2[1] := 4;

			serial->Add(array);
			serial->Add(array2);
			bytes := serial->Serialize();

			deserial := Deserializer->New(bytes);
			a := deserial->ReadByteArray();
			b := a[1]->As(Int);
			b->PrintLine();

			c := deserial->ReadIntArray();
			d := c[1]->As(Int);
			d->PrintLine();
#~
			v1 := deserial->ReadInt();
			v1->PrintLine();
			v2 := deserial->ReadFloat();
			v2->PrintLine();
~#
		}
	}
}
