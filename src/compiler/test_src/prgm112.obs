bundle Default {
	class Test {
		function : Main(args : String[]) ~ Nil {
			string := "[a-z]123(x|y)+[0-9A-Z]a";

			i := 0;
			c := string->Get(i);
			bracket := 0;
			start := -1;
			end := -1;
			while(i < string->Size()) {
				if(c = '[') {
					if(bracket > 1) {
						"error - unbalanced"->PrintLine();
						return;
					};
					bracket += 1;
					start := i + 1;
				} 
				else if(c = ']') {
					if(bracket < 0) {
						"error - unbalanced"->PrintLine();
						return;
					};
					bracket -= 1;
					end := i;
				};

				if(start > -1 & end > -1) {
#					IO.Console->Print(start)->Print(", ")->PrintLine(end);
					string->SubString(start, end - start)->PrintLine();
					start := -1;
					end := -1;
				};


				i += 1;
				c := string->Get(i);
			};
		}
	}
}
