use Net;
use Struct;

bundle Default {
  class HttpTest {
    function : Main(args : String[]) ~ Nil {
      client := HttpClient->New();
      # enable cookies
      client->CookiesEnabled(true);
      # request creates a cookie
      lines := client->Get("http://www.rexswain.com/cgi-bin/cookie.cgi?create", 80);
      each(i : lines) {
        lines->Get(i)->As(String)->PrintLine();
      };
       # request sends back cookie
      lines := client->Get("http://www.rexswain.com/cgi-bin/cookie.cgi", 80);
      each(i : lines) {
        lines->Get(i)->As(String)->PrintLine();
      };
    }
  }
}
