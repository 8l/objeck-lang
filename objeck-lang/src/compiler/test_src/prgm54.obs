use Net;

bundle Default {
	class SocketTest {
		function : Main(args : System.String[]), Nil {
			address := "www.du.edu";

			socket := TCPSocket->New(address, 80);
			if(socket->IsOpen()) {
				get := "GET / HTTP/1.1\r\nHost: ";
				get->Append(address);
				get->Append("\r\n\r\n");
				socket->WriteString(get);
				i := 0;
				do {
					line := socket->ReadString();
					line->Trim()->PrintLine();
					i := i + 1;
				}
				while(i < 20);
				socket->Close();
			}
			else {
				error := "unable to connect to: ";
				error->Append(address);
				error->PrintLine();
			};
		}
	}
}
